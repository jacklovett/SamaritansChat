<mat-spinner class="center" *ngIf="loading" [diameter]="32"></mat-spinner>
<mat-card class="container-margin" [hidden]="loading">
  <div class="toolbar">
    <mat-toolbar>Users</mat-toolbar>
    <div>
      <mat-icon
        matTooltip="Add User"
        class="material-icons material-icons-btn toolbar-icon"
        (click)="addUser()"
        >add_circle</mat-icon
      >
    </div>
  </div>
  <div class="content">
    <div class="search-container">
      <mat-form-field class="search">
        <mat-icon class="search-icon md-14" matPrefix>search</mat-icon>
        <input matInput (keyup)="search($event)" placeholder="Search" />
      </mat-form-field>
    </div>
    <div class="table-container">
      <table mat-table [dataSource]="dataSource" matSort>
        <ng-container matColumnDef="name">
          <th id="name" mat-header-cell mat-sort-header *matHeaderCellDef>
            Name
          </th>
          <td mat-cell *matCellDef="let user">
            {{ user.name }}
          </td>
        </ng-container>
        <ng-container matColumnDef="username">
          <th id="username" mat-header-cell mat-sort-header *matHeaderCellDef>
            Username
          </th>
          <td mat-cell *matCellDef="let user">
            {{ user.username }}
          </td>
        </ng-container>
        <ng-container matColumnDef="email">
          <th id="email" mat-header-cell mat-sort-header *matHeaderCellDef>
            Email
          </th>
          <td mat-cell *matCellDef="let user">
            {{ user.email }}
          </td>
        </ng-container>
        <ng-container matColumnDef="contactNumber">
          <th id="contact-number" mat-header-cell *matHeaderCellDef>
            Contact Number
          </th>
          <td mat-cell *matCellDef="let user">
            {{ user.contactNumber }}
          </td>
        </ng-container>
        <ng-container matColumnDef="lastActive">
          <th
            id="last-active"
            mat-header-cell
            mat-sort-header
            *matHeaderCellDef
          >
            Last Active
          </th>
          <td mat-cell *matCellDef="let user">
            {{ user.lastActive | date: 'dd/MM/yyyy h:mm a' }}
          </td>
        </ng-container>
        <ng-container matColumnDef="edit">
          <th id="edit" mat-header-cell *matHeaderCellDef></th>
          <td mat-cell *matCellDef="let user">
            <mat-icon
              matTooltip="Edit User"
              class="material-icons material-icons-btn"
              (click)="editUser(user)"
              >edit</mat-icon
            >
          </td>
        </ng-container>
        <ng-container matColumnDef="delete">
          <th id="delete" mat-header-cell *matHeaderCellDef></th>
          <td mat-cell *matCellDef="let user">
            <mat-icon
              matTooltip="Delete User"
              class="material-icons material-icons-btn"
              (click)="openDeleteDialog(user.id)"
              >delete</mat-icon
            >
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
      </table>
    </div>
    <mat-paginator
      #paginator
      showFirstLastButtons
      [pageSizeOptions]="[5, 10, 20]"
      [length]="users.length"
    ></mat-paginator>
  </div>
</mat-card>
